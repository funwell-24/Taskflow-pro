<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <!-- Primary Meta Tags -->
    <title>TaskFlow Pro - Advanced Task Management System</title>
    <meta name="title" content="TaskFlow Pro - Advanced Task Management System">
    <meta name="description" content="Organize, track, and complete your tasks efficiently with TaskFlow Pro. The ultimate task management solution for individuals and teams.">
    <meta name="keywords" content="task management, productivity, todo, project management, tasks, organizer, team collaboration">
    <meta name="author" content="TaskFlow Pro Team">
    <meta name="robots" content="index, follow">
    
    <!-- Theme Color -->
    <meta name="theme-color" content="#3b82f6" />
    <meta name="msapplication-TileColor" content="#3b82f6">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://taskflow-pro.vercel.app/">
    <meta property="og:title" content="TaskFlow Pro - Advanced Task Management System">
    <meta property="og:description" content="Organize, track, and complete your tasks efficiently with TaskFlow Pro. The ultimate task management solution for individuals and teams.">
    <meta property="og:image" content="/og-image.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:site_name" content="TaskFlow Pro">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://taskflow-pro.vercel.app/">
    <meta property="twitter:title" content="TaskFlow Pro - Advanced Task Management System">
    <meta property="twitter:description" content="Organize, track, and complete your tasks efficiently with TaskFlow Pro. The ultimate task management solution for individuals and teams.">
    <meta property="twitter:image" content="/og-image.png">

    <!-- Preload Critical Resources -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json" />
    
    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/icon-152x152.png">
    <link rel="apple-touch-icon" sizes="167x167" href="/icon-167x167.png">

    <!-- Favicons -->
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="shortcut icon" href="/favicon.ico">

    <!-- Canonical URL -->
    <link rel="canonical" href="https://taskflow-pro.vercel.app/">

    <!-- DNS Prefetch -->
    <link rel="dns-prefetch" href="https://fonts.googleapis.com">
    <link rel="dns-prefetch" href="https://fonts.gstatic.com">

    <style>
      /* Critical CSS - Load immediately for better performance */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      
      :root {
        /* Primary Colors */
        --primary-50: #eff6ff;
        --primary-100: #dbeafe;
        --primary-500: #3b82f6;
        --primary-600: #2563eb;
        --primary-700: #1d4ed8;
        
        /* Neutral Colors */
        --gray-50: #f8fafc;
        --gray-100: #f1f5f9;
        --gray-200: #e2e8f0;
        --gray-300: #cbd5e1;
        --gray-400: #94a3b8;
        --gray-500: #64748b;
        --gray-600: #475569;
        --gray-700: #334155;
        --gray-800: #1e293b;
        --gray-900: #0f172a;
        
        /* Semantic Colors */
        --success-50: #f0fdf4;
        --success-500: #10b981;
        --success-600: #059669;
        
        --warning-50: #fffbeb;
        --warning-500: #f59e0b;
        --warning-600: #d97706;
        
        --error-50: #fef2f2;
        --error-500: #ef4444;
        --error-600: #dc2626;
      }

      [data-theme="dark"] {
        --gray-50: #0f172a;
        --gray-100: #1e293b;
        --gray-200: #334155;
        --gray-300: #475569;
        --gray-400: #64748b;
        --gray-500: #94a3b8;
        --gray-600: #cbd5e1;
        --gray-700: #e2e8f0;
        --gray-800: #f1f5f9;
        --gray-900: #f8fafc;
      }
      
      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
          'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
          sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        line-height: 1.6;
        color: var(--gray-900);
        transition: background-color 0.3s ease;
      }

      /* Loading Screen Styles */
      #loading-screen {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        color: white;
        font-family: 'Inter', sans-serif;
        transition: opacity 0.5s ease-out;
      }
      
      .loading-spinner {
        width: 50px;
        height: 50px;
        border: 4px solid rgba(255, 255, 255, 0.3);
        border-top: 4px solid white;
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin-bottom: 20px;
      }
      
      .loading-text {
        font-size: 1.5rem;
        font-weight: 600;
        margin-bottom: 8px;
        text-align: center;
      }
      
      .loading-subtext {
        font-size: 1rem;
        opacity: 0.8;
        text-align: center;
        max-width: 300px;
        line-height: 1.5;
      }
      
      .loading-progress {
        width: 200px;
        height: 4px;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 2px;
        margin-top: 20px;
        overflow: hidden;
      }
      
      .loading-progress-bar {
        height: 100%;
        background: white;
        border-radius: 2px;
        animation: progress 2s ease-in-out infinite;
      }
      
      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }
      
      @keyframes progress {
        0% { transform: translateX(-100%); }
        50% { transform: translateX(0); }
        100% { transform: translateX(100%); }
      }
      
      /* Fade out animation */
      .fade-out {
        opacity: 0;
      }
      
      /* Error boundary styles */
      .error-boundary {
        padding: 2rem;
        text-align: center;
        background: white;
        border-radius: 8px;
        margin: 2rem;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }

      /* Focus styles for accessibility */
      button:focus-visible,
      a:focus-visible,
      input:focus-visible,
      select:focus-visible,
      textarea:focus-visible {
        outline: 2px solid var(--primary-500);
        outline-offset: 2px;
      }

      /* Reduced motion for accessibility */
      @media (prefers-reduced-motion: reduce) {
        * {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01ms !important;
        }
      }

      /* High contrast mode support */
      @media (prefers-contrast: high) {
        :root {
          --gray-200: #000000;
          --gray-700: #000000;
          --primary-500: #0000ff;
        }
      }

      /* Print styles */
      @media print {
        .no-print {
          display: none !important;
        }
      }
    </style>
  </head>
  <body>
    <!-- Loading Screen -->
    <div id="loading-screen">
      <div class="loading-spinner"></div>
      <div class="loading-text">Loading TaskFlow Pro</div>
      <div class="loading-subtext">Your ultimate task management solution is starting up...</div>
      <div class="loading-progress">
        <div class="loading-progress-bar"></div>
      </div>
    </div>

    <!-- React App Root -->
    <div id="root"></div>
    
    <!-- No Script Fallback -->
    <noscript>
      <div style="text-align: center; padding: 2rem; color: white; font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
        <div style="background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(10px); padding: 3rem; border-radius: 1rem; border: 1px solid rgba(255, 255, 255, 0.2);">
          <h1 style="font-size: 2rem; margin-bottom: 1rem; color: white;">JavaScript Required</h1>
          <p style="margin-bottom: 1.5rem; line-height: 1.6; opacity: 0.9;">
            TaskFlow Pro requires JavaScript to function properly. Please enable JavaScript in your browser settings to continue.
          </p>
          <p style="margin-bottom: 2rem; line-height: 1.6; opacity: 0.8;">
            If you're using a modern browser, this shouldn't be an issue. If problems persist, try updating your browser or contact support.
          </p>
          <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
            <a 
              href="https://enable-javascript.com/" 
              target="_blank"
              style="background: white; color: #667eea; padding: 0.75rem 1.5rem; border-radius: 0.5rem; text-decoration: none; font-weight: 600; transition: transform 0.2s;"
              onmouseover="this.style.transform='translateY(-2px)'"
              onmouseout="this.style.transform='translateY(0)'"
            >
              How to Enable JavaScript
            </a>
            <button 
              onclick="window.location.reload()"
              style="background: transparent; color: white; border: 2px solid white; padding: 0.75rem 1.5rem; border-radius: 0.5rem; text-decoration: none; font-weight: 600; cursor: pointer; transition: all 0.2s;"
              onmouseover="this.style.background='white'; this.style.color='#667eea'"
              onmouseout="this.style.background='transparent'; this.style.color='white'"
            >
              Reload Page
            </button>
          </div>
        </div>
      </div>
    </noscript>

    <script type="module" src="/src/main.jsx"></script>
    
    <script>
      // Enhanced loading screen management
      (function() {
        'use strict';
        
        const loadingScreen = document.getElementById('loading-screen');
        let progress = 0;
        const maxProgress = 90; // Stop at 90%, let React take over the last 10%
        
        // Simulate progress for better UX
        const progressInterval = setInterval(() => {
          progress += Math.random() * 10;
          if (progress >= maxProgress) {
            clearInterval(progressInterval);
          }
        }, 200);
        
        // Remove loading screen when app is ready
        function removeLoadingScreen() {
          if (loadingScreen) {
            loadingScreen.classList.add('fade-out');
            setTimeout(() => {
              loadingScreen.remove();
            }, 500);
          }
          clearInterval(progressInterval);
        }
        
        // Try to remove loading screen when page is fully loaded
        window.addEventListener('load', function() {
          setTimeout(removeLoadingScreen, 1000);
        });
        
        // Fallback: remove loading screen after 5 seconds max
        setTimeout(removeLoadingScreen, 5000);
        
        // Error handling for failed resources
        window.addEventListener('error', function(e) {
          console.error('Resource loading error:', e);
          // You could update the loading screen to show an error state
        });
        
        // Service Worker Registration (for PWA)
        if ('serviceWorker' in navigator) {
          window.addEventListener('load', function() {
            // Only register in production
            if (window.location.hostname !== 'localhost' && window.location.hostname !== '127.0.0.1') {
              navigator.serviceWorker.register('/sw.js')
                .then(function(registration) {
                  console.log('SW registered: ', registration);
                  
                  // Check for updates
                  registration.addEventListener('updatefound', () => {
                    const newWorker = registration.installing;
                    console.log('SW update found:', newWorker);
                    
                    newWorker.addEventListener('statechange', () => {
                      if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                        // New content is available, show update notification
                        console.log('New content is available; please refresh.');
                      }
                    });
                  });
                })
                .catch(function(registrationError) {
                  console.log('SW registration failed: ', registrationError);
                });
            }
          });
        }
        
        // Performance monitoring
        if ('performance' in window) {
          // Measure page load time
          window.addEventListener('load', () => {
            setTimeout(() => {
              const navigation = performance.getEntriesByType('navigation')[0];
              if (navigation) {
                const loadTime = navigation.loadEventEnd - navigation.navigationStart;
                console.log('Page load time:', loadTime, 'ms');
                
                // Send to analytics (example)
                if (window.gtag) {
                  window.gtag('event', 'timing_complete', {
                    name: 'page_load',
                    value: Math.round(loadTime),
                    event_category: 'Load Performance'
                  });
                }
              }
            }, 0);
          });
        }
        
        // Theme detection
        function detectTheme() {
          const savedTheme = localStorage.getItem('taskflow_theme');
          const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
          
          let theme = savedTheme || 'auto';
          
          if (theme === 'auto') {
            theme = systemPrefersDark ? 'dark' : 'light';
          }
          
          document.documentElement.setAttribute('data-theme', theme);
          
          // Listen for system theme changes
          window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
            if (!savedTheme || savedTheme === 'auto') {
              document.documentElement.setAttribute('data-theme', e.matches ? 'dark' : 'light');
            }
          });
        }
        
        // Initialize theme
        detectTheme();
        
        // Offline detection
        window.addEventListener('online', function() {
          console.log('Application is online');
          document.body.classList.remove('offline');
        });
        
        window.addEventListener('offline', function() {
          console.log('Application is offline');
          document.body.classList.add('offline');
        });
        
      })();
    </script>
    
    <!-- Google Analytics (example - replace with your own) -->
    <!--
    <script async src="https://www.googletagmanager.com/gtag/js?id=GA_MEASUREMENT_ID"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'GA_MEASUREMENT_ID');
    </script>
    -->
  </body>
</html>